#!/usr/bin/env ruby

require "bind_log_analyzer"
require 'optparse'

@filename = nil

optparse = OptionParser.new do |opts|
  # Set a banner, displayed at the top
  # of the help screen.
  opts.banner = "Usage: ./#{File.basename(__FILE__)} -f FILENAME | --help"

  opts.on( '-f', '--file FILE', "Indicates the log file to parse. It's mandatory" ) do |f|
    @filename = f
  end

  # This displays the help screen
  opts.on( '-h', '--help', 'Display this screen' ) do
    puts opts
    exit
  end
end

optparse.parse!

if @filename
  @base = BindLogAnalyzer::Base.new(nil, @filename)
  @base.analyze
else
  puts optparse.banner
  exit -1
end